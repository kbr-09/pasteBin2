[
  {
    "id": "96d5ab2d",
    "title": "What is this life if fulle of care we have no time to stand and stare",
    "content": "Is this color good enough? => =! != == ===",
    "language": null,
    "created_at": "2025-12-18 00:21:02",
    "size": 42
  },
  {
    "id": "15cea734",
    "title": null,
    "content": "a new paste to try\r\n\r\n",
    "language": null,
    "created_at": "2025-12-17 22:22:02",
    "size": 22
  },
  {
    "id": "77919dda",
    "title": "The entire code block - in one page!",
    "content": "#!/usr/bin/env python3\r\nimport os\r\nimport json\r\nimport hashlib\r\nimport datetime\r\nfrom flask import Flask, request, redirect, url_for, render_template_string, abort, jsonify, Response\r\n\r\napp = Flask(__name__)\r\napp.secret_key = os.urandom(32)\r\n\r\n# Configuration\r\nPASTE_STORAGE_DIR = os.path.join(os.path.dirname(__file__), \"pastes\")\r\nPASTE_FILE = os.path.join(PASTE_STORAGE_DIR, \"pastes.json\")\r\nMAX_PASTE_SIZE = 50000\r\nMAX_PASTES_PER_PAGE = 20\r\nPORT = 5002\r\n\r\nos.makedirs(PASTE_STORAGE_DIR, exist_ok=True)\r\n\r\n\r\ndef init_storage():\r\n    if not os.path.exists(PASTE_FILE):\r\n        with open(PASTE_FILE, \"w\", encoding=\"utf-8\") as f:\r\n            json.dump([], f)\r\n\r\n\r\ndef load_pastes():\r\n    try:\r\n        with open(PASTE_FILE, \"r\", encoding=\"utf-8\") as f:\r\n            data = json.load(f)\r\n            return data if isinstance(data, list) else []\r\n    except (FileNotFoundError, json.JSONDecodeError):\r\n        return []\r\n\r\n\r\ndef save_pastes(pastes):\r\n    temp_file = PASTE_FILE + \".tmp\"\r\n    with open(temp_file, \"w\", encoding=\"utf-8\") as f:\r\n        json.dump(pastes, f, indent=2)\r\n    os.replace(temp_file, PASTE_FILE)\r\n\r\n\r\ndef generate_paste_id(content: str) -> str:\r\n    return hashlib.md5(content.encode(\"utf-8\")).hexdigest()[:8]\r\n\r\n\r\ndef detect_language(text: str):\r\n    if text.startswith(\"import \") or \"def \" in text:\r\n        return \"python\"\r\n    if \"function(\" in text or \"console.log(\" in text:\r\n        return \"javascript\"\r\n    if \"<\" in text and \"</\" in text:\r\n        return \"html\"\r\n    return None\r\n\r\n\r\ndef validate_paste(content: str):\r\n    if not content or not content.strip():\r\n        return False, \"Content cannot be empty\"\r\n    if len(content) > MAX_PASTE_SIZE:\r\n        return False, f\"Content too large. Maximum size is {MAX_PASTE_SIZE} characters\"\r\n    return True, \"\"\r\n\r\n\r\nINDEX_TEMPLATE = r\"\"\"\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\"/>\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\r\n  <title>{{ title }}</title>\r\n  <style>\r\n    * { margin:0; padding:0; box-sizing:border-box; }\r\n    body {\r\n      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;\r\n      color:#333;\r\n      background: linear-gradient(-45deg, hsla(60, 1%, 37%, 1) 0%, hsla(25, 33%, 17%, 1) 100%);\r\n      min-height:100vh;\r\n    }\r\n    .container { max-width:1200px; margin:0 auto; padding:20px; }\r\n    .header { text-align:center; color:#EDEDE9; margin-bottom:30px; }\r\n    .header h1 { font-size:1.5rem; margin-bottom:8px; }\r\n\r\n    .alert { padding:12px 16px; border-radius:8px; margin-bottom:16px; }\r\n    .alert-success { background:#d4edda; border:1px solid #c3e6cb; color:#155724; }\r\n    .alert-error { background:#f8d7da; border:1px solid #f5c6cb; color:#721c24; }\r\n\r\n    .paste-form {\r\n      background:#fff; border-radius:15px; padding:20px;\r\n      box-shadow:0 10px 30px rgba(0,0,0,0.2);\r\n      margin-bottom:24px;\r\n    }\r\n    .form-group { margin-bottom:14px; }\r\n    label { display:block; margin-bottom:6px; font-weight:600; color:#555; }\r\n    input, textarea, select {\r\n      width:100%; padding:12px; border:2px solid #e1e5e9; border-radius:8px; font-size:14px;\r\n    }\r\n    textarea { min-height:200px; font-family: 'Monaco','Menlo','Ubuntu Mono',monospace; resize:vertical; }\r\n\r\n    .btn {\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n      color:#fff; border:none; border-radius:8px; cursor:pointer;\r\n      padding:10px 18px; font-weight:700; text-decoration:none; display:inline-block;\r\n    }\r\n    .btn-sm { padding:6px 12px; font-size:12px; font-weight:700; }\r\n    .btn-secondary { background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%); }\r\n    .btn-danger { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%); }\r\n\r\n    .paste-item {\r\n      background:#fff; border-radius:15px; padding:18px; margin-bottom:16px;\r\n      box-shadow:0 5px 15px rgba(0,0,0,0.12);\r\n    }\r\n    .paste-header { display:flex; justify-content:space-between; gap:10px; align-items:flex-start; }\r\n    .meta { color:#666; font-size:13px; margin-top:6px; }\r\n    .actions { display:flex; gap:8px; flex-wrap:wrap; }\r\n\r\n    .content {\r\n      position: relative;              /* IMPORTANT: anchor absolute copy button */\r\n      margin-top:12px;\r\n      background:#f8f9fa; border:1px solid #e1e5e9; border-radius:8px;\r\n      padding:14px;\r\n      padding-top:44px;                /* give space so button doesn't cover line 1 */\r\n      font-family:'Monaco','Menlo','Ubuntu Mono',monospace;\r\n      white-space:pre-wrap;\r\n      max-height:240px; overflow:auto;\r\n    }\r\n\r\n    .copy-btn {\r\n      position:absolute; top:10px; right:10px;\r\n      background: rgba(102, 126, 234, 0.9);\r\n      color:white; border:none; border-radius:6px;\r\n      padding:6px 10px; font-weight:800; cursor:pointer;\r\n    }\r\n\r\n    .pagination { display:flex; justify-content:center; gap:10px; margin-top:22px; flex-wrap:wrap; }\r\n    .pagination a, .pagination span {\r\n      padding:8px 14px; border:1px solid #ddd; border-radius:6px; text-decoration:none;\r\n      color:#333; background:#fff;\r\n    }\r\n    .pagination .current { background:#667eea; color:#fff; border-color:#667eea; }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"container\">\r\n    <div class=\"header\">\r\n      <h1>HOMElab TEXTshare</h1>\r\n      <p>Fast (not really), secure (daddy issues though)</p>\r\n    </div>\r\n\r\n    {% if message %}\r\n      <div class=\"alert alert-{{ message_type }}\">{{ message }}</div>\r\n    {% endif %}\r\n\r\n    <div class=\"paste-form\">\r\n      <h2>New Paste</h2>\r\n      <form method=\"post\" action=\"{{ url_for('create_paste') }}\">\r\n        <div class=\"form-group\">\r\n          <label for=\"title\">Title (optional)</label>\r\n          <input id=\"title\" name=\"title\" type=\"text\" placeholder=\"Enter a title\">\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"language\">Language</label>\r\n          <select id=\"language\" name=\"language\">\r\n            <option value=\"auto\">Auto-detect</option>\r\n            <option value=\"text\">Plain Text</option>\r\n            <option value=\"python\">Python</option>\r\n            <option value=\"javascript\">JavaScript</option>\r\n            <option value=\"html\">HTML</option>\r\n            <option value=\"css\">CSS</option>\r\n            <option value=\"json\">JSON</option>\r\n            <option value=\"markdown\">Markdown</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"content\">Content</label>\r\n          <textarea id=\"content\" name=\"content\" required placeholder=\"Paste your code or text here...\"></textarea>\r\n        </div>\r\n\r\n        <button class=\"btn\" type=\"submit\">Create Paste</button>\r\n      </form>\r\n    </div>\r\n\r\n    <h2 style=\"color:#EDEDE9; margin-bottom:12px;\">Recent Pastes</h2>\r\n\r\n    {% if pastes %}\r\n      {% for paste in pastes %}\r\n        <div class=\"paste-item\">\r\n          <div class=\"paste-header\">\r\n            <div>\r\n              <h3>{{ paste.title or 'Untitled Paste' }}</h3>\r\n              <div class=\"meta\">\r\n                ID: {{ paste.id }} \u2022 {{ paste.created_at }} \u2022 {{ paste.language or 'Unknown' }} \u2022 {{ paste.size }} chars\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"actions\">\r\n              <a class=\"btn btn-sm btn-secondary\" href=\"{{ url_for('view_paste', paste_id=paste.id) }}\">View</a>\r\n              <a class=\"btn btn-sm btn-secondary\" href=\"{{ url_for('raw_paste', paste_id=paste.id) }}\">Raw</a>\r\n              <a class=\"btn btn-sm btn-danger\" href=\"{{ url_for('delete_paste', paste_id=paste.id) }}\"\r\n                 onclick=\"return confirm('Delete this paste?')\">Delete</a>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"content\" id=\"content-{{ paste.id }}\">\r\n            {{ paste.content[:200] }}{% if paste.content|length > 200 %}...{% endif %}\r\n            <button class=\"copy-btn\" onclick=\"copyToClipboard('{{ paste.id }}', this)\">\ud83d\udccb Copy</button>\r\n          </div>\r\n        </div>\r\n      {% endfor %}\r\n\r\n      {% if total_pages > 1 %}\r\n        <div class=\"pagination\">\r\n          {% if page > 1 %}\r\n            <a href=\"{{ url_for('index', page=page-1) }}\">Previous</a>\r\n          {% endif %}\r\n\r\n          {% for pg in range(1, total_pages+1) %}\r\n            {% if pg == page %}\r\n              <span class=\"current\">{{ pg }}</span>\r\n            {% else %}\r\n              <a href=\"{{ url_for('index', page=pg) }}\">{{ pg }}</a>\r\n            {% endif %}\r\n          {% endfor %}\r\n\r\n          {% if page < total_pages %}\r\n            <a href=\"{{ url_for('index', page=page+1) }}\">Next</a>\r\n          {% endif %}\r\n        </div>\r\n      {% endif %}\r\n    {% else %}\r\n      <p style=\"color:#EDEDE9;\">No pastes yet.</p>\r\n    {% endif %}\r\n  </div>\r\n\r\n  <script>\r\n    function copyToClipboard(pasteId, btn) {\r\n      const node = document.getElementById('content-' + pasteId);\r\n      if (!node) return;\r\n\r\n      const clone = node.cloneNode(true);\r\n      const b = clone.querySelector('button.copy-btn');\r\n      if (b) b.remove();\r\n\r\n      const text = (clone.innerText || clone.textContent || '').trim();\r\n\r\n      const show = () => {\r\n        const old = btn.innerHTML;\r\n        btn.innerHTML = '\u2705 Copied!';\r\n        setTimeout(() => btn.innerHTML = old, 1600);\r\n      };\r\n\r\n      // HTTPS/localhost works reliably; LAN HTTP often blocks it -> fallback below\r\n      if (navigator.clipboard && window.isSecureContext) {\r\n        navigator.clipboard.writeText(text).then(show).catch(() => fallbackCopy(text, show));\r\n      } else {\r\n        fallbackCopy(text, show);\r\n      }\r\n    }\r\n\r\n    function fallbackCopy(text, okCb) {\r\n      const ta = document.createElement('textarea');\r\n      ta.value = text;\r\n      ta.setAttribute('readonly', '');\r\n      ta.style.position = 'fixed';\r\n      ta.style.left = '-9999px';\r\n      document.body.appendChild(ta);\r\n      ta.select();\r\n      try {\r\n        const ok = document.execCommand('copy');\r\n        if (ok) okCb();\r\n        else alert('Copy failed (browser blocked it).');\r\n      } catch (e) {\r\n        alert('Copy failed (browser blocked it).');\r\n      } finally {\r\n        document.body.removeChild(ta);\r\n      }\r\n    }\r\n  </script>\r\n</body>\r\n</html>\r\n\"\"\"\r\n\r\n\r\n# \u2705 VIEW PAGE: only paste + home/raw/delete/copy\r\nVIEW_TEMPLATE = r\"\"\"\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\"/>\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\r\n  <title>{{ title }}</title>\r\n  <style>\r\n    * { margin:0; padding:0; box-sizing:border-box; }\r\n    body {\r\n      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;\r\n      background: linear-gradient(-45deg, hsla(60, 1%, 37%, 1) 0%, hsla(25, 33%, 17%, 1) 100%);\r\n      min-height:100vh; padding:20px;\r\n    }\r\n    .wrap { max-width:1100px; margin:0 auto; }\r\n\r\n    .topbar {\r\n      display:flex; justify-content:space-between; align-items:center; gap:10px;\r\n      margin-bottom:12px; flex-wrap:wrap;\r\n    }\r\n    .title { color:#EDEDE9; font-weight:800; font-size:16px; }\r\n\r\n    .btn {\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n      color:#fff; border:none; border-radius:8px; cursor:pointer;\r\n      padding:8px 14px; font-weight:800; text-decoration:none; display:inline-block;\r\n    }\r\n    .btn-secondary { background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%); }\r\n    .btn-danger { background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%); }\r\n\r\n    .content {\r\n      background:#fff; border-radius:14px; padding:18px;\r\n      padding-top:44px;\r\n      box-shadow:0 10px 30px rgba(0,0,0,0.25);\r\n      position:relative;\r\n      font-family:'Monaco','Menlo','Ubuntu Mono',monospace;\r\n      white-space:pre-wrap;\r\n      overflow:auto;\r\n      max-height:80vh;\r\n    }\r\n\r\n    .copy-btn {\r\n      position:absolute; top:10px; right:10px;\r\n      background: rgba(102, 126, 234, 0.9);\r\n      color:white; border:none; border-radius:6px;\r\n      padding:6px 10px; font-weight:800; cursor:pointer;\r\n    }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"wrap\">\r\n    <div class=\"topbar\">\r\n      <div class=\"title\">Viewing paste: {{ paste_id }}</div>\r\n      <div style=\"display:flex; gap:10px; flex-wrap:wrap;\">\r\n        <a class=\"btn btn-secondary\" href=\"{{ url_for('index') }}\">Home</a>\r\n        <a class=\"btn btn-secondary\" href=\"{{ url_for('raw_paste', paste_id=paste_id) }}\">Raw</a>\r\n        <a class=\"btn btn-danger\" href=\"{{ url_for('delete_paste', paste_id=paste_id) }}\"\r\n           onclick=\"return confirm('Delete this paste?')\">Delete</a>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"content\" id=\"paste-content\">\r\n{{ paste_content }}\r\n      <button class=\"copy-btn\" onclick=\"copyPaste(this)\">\ud83d\udccb Copy</button>\r\n    </div>\r\n  </div>\r\n\r\n  <script>\r\n    function copyPaste(btn) {\r\n      const node = document.getElementById('paste-content');\r\n      if (!node) return;\r\n\r\n      const clone = node.cloneNode(true);\r\n      const b = clone.querySelector('button.copy-btn');\r\n      if (b) b.remove();\r\n\r\n      const text = (clone.innerText || clone.textContent || '').trim();\r\n\r\n      const show = () => {\r\n        const old = btn.innerHTML;\r\n        btn.innerHTML = '\u2705 Copied!';\r\n        setTimeout(() => btn.innerHTML = old, 1600);\r\n      };\r\n\r\n      if (navigator.clipboard && window.isSecureContext) {\r\n        navigator.clipboard.writeText(text).then(show).catch(() => fallback(text, show));\r\n      } else {\r\n        fallback(text, show);\r\n      }\r\n    }\r\n\r\n    function fallback(text, okCb) {\r\n      const ta = document.createElement('textarea');\r\n      ta.value = text;\r\n      ta.setAttribute('readonly', '');\r\n      ta.style.position = 'fixed';\r\n      ta.style.left = '-9999px';\r\n      document.body.appendChild(ta);\r\n      ta.select();\r\n      try {\r\n        const ok = document.execCommand('copy');\r\n        if (ok) okCb();\r\n        else alert('Copy failed (browser blocked it).');\r\n      } catch (e) {\r\n        alert('Copy failed (browser blocked it).');\r\n      } finally {\r\n        document.body.removeChild(ta);\r\n      }\r\n    }\r\n  </script>\r\n</body>\r\n</html>\r\n\"\"\"\r\n\r\n\r\n@app.route(\"/\", methods=[\"GET\"])\r\ndef index():\r\n    init_storage()\r\n\r\n    page = int(request.args.get(\"page\", 1))\r\n    pastes = load_pastes()\r\n\r\n    total_pastes = len(pastes)\r\n    total_pages = (total_pastes + MAX_PASTES_PER_PAGE - 1) // MAX_PASTES_PER_PAGE\r\n\r\n    start_idx = (page - 1) * MAX_PASTES_PER_PAGE\r\n    end_idx = start_idx + MAX_PASTES_PER_PAGE\r\n    page_pastes = pastes[start_idx:end_idx]\r\n\r\n    message = request.args.get(\"message\", \"\")\r\n    message_type = request.args.get(\"type\", \"success\")\r\n\r\n    return render_template_string(\r\n        INDEX_TEMPLATE,\r\n        title=\"Modern Paste Service\",\r\n        pastes=page_pastes,\r\n        page=page,\r\n        total_pages=total_pages,\r\n        message=message,\r\n        message_type=message_type,\r\n    )\r\n\r\n\r\n@app.route(\"/paste\", methods=[\"POST\"])\r\ndef create_paste():\r\n    content = request.form.get(\"content\", \"\")\r\n    title = request.form.get(\"title\", \"\").strip()\r\n    language = request.form.get(\"language\", \"auto\")\r\n\r\n    is_valid, error_msg = validate_paste(content)\r\n    if not is_valid:\r\n        return redirect(url_for(\"index\", message=error_msg, type=\"error\"))\r\n\r\n    paste_id = generate_paste_id(content)\r\n\r\n    paste = {\r\n        \"id\": paste_id,\r\n        \"title\": title if title else None,\r\n        \"content\": content,\r\n        \"language\": language if language != \"auto\" else detect_language(content),\r\n        \"created_at\": datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"),\r\n        \"size\": len(content),\r\n    }\r\n\r\n    pastes = load_pastes()\r\n    pastes.insert(0, paste)\r\n    save_pastes(pastes)\r\n\r\n    return redirect(url_for(\"index\", message=f\"Paste created successfully! ID: {paste_id}\", type=\"success\"))\r\n\r\n\r\n@app.route(\"/paste/<paste_id>\", methods=[\"GET\"])\r\ndef view_paste(paste_id):\r\n    pastes = load_pastes()\r\n    paste = next((paste for paste in pastes if paste.get(\"id\") == paste_id), None)\r\n    if not paste:\r\n        abort(404)\r\n\r\n    paste_content = paste.get(\"content\", \"\")\r\n\r\n    return render_template_string(\r\n        VIEW_TEMPLATE,\r\n        title=f\"Paste {paste_id}\",\r\n        paste_id=paste_id,\r\n        paste_content=paste_content,\r\n    )\r\n\r\n\r\n@app.route(\"/raw/<paste_id>\", methods=[\"GET\"])\r\ndef raw_paste(paste_id):\r\n    pastes = load_pastes()\r\n    paste = next((paste for paste in pastes if paste.get(\"id\") == paste_id), None)\r\n    if not paste:\r\n        abort(404)\r\n    return Response(paste.get(\"content\", \"\"), mimetype=\"text/plain; charset=utf-8\")\r\n\r\n\r\n@app.route(\"/delete/<paste_id>\", methods=[\"GET\"])\r\ndef delete_paste(paste_id):\r\n    pastes = load_pastes()\r\n    original_count = len(pastes)\r\n    pastes = [paste for paste in pastes if paste.get(\"id\") != paste_id]\r\n\r\n    if len(pastes) < original_count:\r\n        save_pastes(pastes)\r\n        return redirect(url_for(\"index\", message=\"Paste deleted successfully!\", type=\"success\"))\r\n    return redirect(url_for(\"index\", message=\"Paste not found!\", type=\"error\"))\r\n\r\n\r\n@app.route(\"/api/pastes\", methods=[\"GET\"])\r\ndef api_get_pastes():\r\n    return jsonify(load_pastes())\r\n\r\n\r\n@app.route(\"/api/paste\", methods=[\"POST\"])\r\ndef api_create_paste():\r\n    data = request.get_json(force=True, silent=True) or {}\r\n    content = data.get(\"content\", \"\")\r\n\r\n    is_valid, error_msg = validate_paste(content)\r\n    if not is_valid:\r\n        return jsonify({\"error\": error_msg}), 400\r\n\r\n    paste_id = generate_paste_id(content)\r\n    paste = {\r\n        \"id\": paste_id,\r\n        \"title\": data.get(\"title\"),\r\n        \"content\": content,\r\n        \"language\": data.get(\"language\", \"auto\"),\r\n        \"created_at\": datetime.datetime.now().strftime(\"%Y-%m-%d %H:%M:%S\"),\r\n        \"size\": len(content),\r\n    }\r\n\r\n    pastes = load_pastes()\r\n    pastes.insert(0, paste)\r\n    save_pastes(pastes)\r\n\r\n    return jsonify({\"id\": paste_id, \"paste\": paste})\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    print(\"... launching private texts\")\r\n    print(f\"... at http://localhost:{PORT}\")\r\n    app.run(host=\"0.0.0.0\", port=PORT, debug=True)\r\n",
    "language": "python",
    "created_at": "2025-12-17 21:33:43",
    "size": 17922
  }
]